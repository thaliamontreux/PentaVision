<nav class="pv-admin-sidebar" aria-label="Admin navigation">
  {% set current_path = request.path if request else '' %}
  {% set current_endpoint = request.endpoint if request else '' %}

  {% if is_system_admin %}
    {% set href = url_for('admin.index') %}
    <a class="pv-admin-navbtn{% if current_path == href %} is-active{% endif %}" href="{{ href }}">Overview</a>
    {% set href = url_for('admin.users_list') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Users</a>
    {% set href = url_for('admin.properties_list') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Properties</a>
  {% endif %}

  {% if is_system_admin or is_technician %}
    {% set href = url_for('camera_admin.list_devices') %}
    <a class="pv-admin-navbtn{% if current_endpoint in ['camera_admin.list_devices', 'camera_admin.create_device', 'camera_admin.edit_device', 'camera_admin.scan'] %} is-active{% endif %}" href="{{ href }}">Cameras</a>
    {% set href = url_for('camera_admin.list_patterns') %}
    <a class="pv-admin-navbtn{% if current_endpoint in ['camera_admin.list_patterns', 'camera_admin.create_pattern', 'camera_admin.edit_pattern', 'camera_admin.import_csv'] %} is-active{% endif %}" href="{{ href }}">Camera URL templates</a>
    {% set href = url_for('camera_admin.rtmp_list') %}
    <a class="pv-admin-navbtn{% if current_endpoint in ['camera_admin.rtmp_list', 'camera_admin.rtmp_create', 'camera_admin.rtmp_edit'] %} is-active{% endif %}" href="{{ href }}">RTMP outputs</a>
  {% endif %}

  {% if is_system_admin %}
    {% set href = url_for('admin.recordings_alias') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Recordings</a>
    {% set href = url_for('admin.recording_settings_alias') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Recording settings</a>
    {% set href = url_for('admin.storage_settings') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Storage</a>
    {% set href = url_for('admin.access_control') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Block / Allow</a>
    {% set href = url_for('admin.blocklist_distribution') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Blocklist Distribution</a>
    {% set href = url_for('admin.blocklist_integration') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Blocklist Integration</a>
    {% set href = url_for('admin.blocklist_audit') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Blocklist Audit</a>
    {% set href = url_for('admin.services') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Services</a>
    {% set href = url_for('admin.audit_alias') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Audit log</a>
    {% set href = url_for('installer.install') %}
    <a class="pv-admin-navbtn{% if current_path.startswith(href) %} is-active{% endif %}" href="{{ href }}">Installer & databases</a>
  {% endif %}
</nav>
