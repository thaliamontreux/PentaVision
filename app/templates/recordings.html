{% extends 'base.html' %}

{% block title %}Recordings Â· PentaVision{% endblock %}

{% block content %}
  <section class="pv-section">
    {% if is_system_admin or is_technician %}
      <div class="pv-admin-layout">
        {% include 'admin/_nav.html' %}
        <div class="pv-admin-main">
          <div class="pv-card">
            <div class="pv-card-header">
              <div>
                <h1 class="pv-page-title">Recordings</h1>
                <p class="pv-card-subtitle">Select a camera to browse its recordings.</p>
              </div>
            </div>

            {% if cameras %}
              <div class="pv-recordings-camera-grid">
                {% for cam in cameras %}
                  <a
                    href="{{ url_for('main.camera_recordings', device_id=cam.id) }}"
                    class="pv-rec-camera-tile"
                    target="_blank"
                    rel="noopener"
                  >
                    <div class="pv-rec-camera-tile-icon">
                      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                      </svg>
                    </div>
                    <div class="pv-rec-camera-tile-info">
                      <h3 class="pv-rec-camera-tile-name">{{ cam.name }}</h3>
                      <span class="pv-rec-camera-tile-count">
                        {{ cam.recording_count }} recording{{ 's' if cam.recording_count != 1 else '' }}
                      </span>
                    </div>
                    <div class="pv-rec-camera-tile-arrow">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                      </svg>
                    </div>
                  </a>
                {% endfor %}
              </div>
            {% else %}
              <div class="pv-empty">
                <p class="pv-empty-title">No cameras found</p>
                <p class="pv-empty-subtitle">Add cameras to start recording.</p>
                <div class="pv-empty-actions">
                  <a href="{{ url_for('main.cameras') }}" class="pv-button">Manage Cameras</a>
                </div>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    {% else %}
      <div class="pv-page-header">
        <div>
          <h1 class="pv-page-title">Recordings</h1>
          <p class="pv-page-subtitle">Select a camera to browse its recordings.</p>
        </div>
      </div>

      {% if cameras %}
        <div class="pv-recordings-camera-grid">
          {% for cam in cameras %}
            <a
              href="{{ url_for('main.camera_recordings', device_id=cam.id) }}"
              class="pv-rec-camera-tile"
              target="_blank"
              rel="noopener"
            >
              <div class="pv-rec-camera-tile-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
              </div>
              <div class="pv-rec-camera-tile-info">
                <h3 class="pv-rec-camera-tile-name">{{ cam.name }}</h3>
                <span class="pv-rec-camera-tile-count">
                  {{ cam.recording_count }} recording{{ 's' if cam.recording_count != 1 else '' }}
                </span>
              </div>
              <div class="pv-rec-camera-tile-arrow">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                </svg>
              </div>
            </a>
          {% endfor %}
        </div>
      {% else %}
        <div class="pv-empty">
          <p class="pv-empty-title">No cameras found</p>
          <p class="pv-empty-subtitle">Add cameras to start recording.</p>
          <div class="pv-empty-actions">
            <a href="{{ url_for('main.cameras') }}" class="pv-button">Manage Cameras</a>
          </div>
        </div>
      {% endif %}
    {% endif %}
  </section>
{% endblock %}
