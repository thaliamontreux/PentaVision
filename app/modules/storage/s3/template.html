<div class="pv-module-config-group" data-provider="s3" style="display: none;">
  <div class="pv-help">Upload recordings to S3 or an S3-compatible provider (MinIO / Wasabi / etc.).</div>

  <div class="pv-field-group">
    <label for="module_cfg_s3_bucket">Bucket</label>
    <input id="module_cfg_s3_bucket" name="module_cfg_s3_bucket" type="text" value="{{ edit_cfg.get('bucket', '') if edit_module else '' }}" placeholder="my-recordings-bucket" {% if cfg_readonly %}disabled{% endif %} />
    <div class="pv-help">Bucket name where recordings are stored. <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-bucket.html" target="_blank" rel="noopener">Create an S3 bucket</a></div>
  </div>

  <div class="pv-field-group">
    <label for="module_cfg_s3_endpoint">Endpoint (optional)</label>
    <input id="module_cfg_s3_endpoint" name="module_cfg_s3_endpoint" type="text" value="{{ edit_cfg.get('endpoint', '') if edit_module else '' }}" placeholder="(blank for AWS)" {% if cfg_readonly %}disabled{% endif %} />
    <div class="pv-help">Leave blank for AWS, or set the URL for S3-compatible providers. <a href="https://docs.aws.amazon.com/general/latest/gr/s3.html" target="_blank" rel="noopener">AWS S3 endpoints</a></div>
  </div>

  <div class="pv-field-group">
    <label for="module_cfg_s3_region">Region (optional)</label>
    <input id="module_cfg_s3_region" name="module_cfg_s3_region" type="text" value="{{ edit_cfg.get('region', '') if edit_module else '' }}" placeholder="us-east-1" {% if cfg_readonly %}disabled{% endif %} />
    <div class="pv-help">AWS region for the bucket. <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints" target="_blank" rel="noopener">AWS regions</a></div>
  </div>

  <div class="pv-field-group">
    <label for="module_cfg_s3_access_key">Access key ID</label>
    <input id="module_cfg_s3_access_key" name="module_cfg_s3_access_key" type="password" autocomplete="off" {% if cfg_readonly %}disabled{% endif %} />
    {% if edit_module and edit_cfg and edit_cfg.get('access_key') %}
      {% set _pv_ak = (edit_cfg.get('access_key') or '')|string %}
      <div class="pv-help">Saved: {{ ('*' * (_pv_ak|length - 4)) ~ _pv_ak[-4:] if _pv_ak and (_pv_ak|length > 4) else ('*' * (_pv_ak|length)) }}</div>
    {% endif %}
    <div class="pv-help">From an IAM user or access key. <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html" target="_blank" rel="noopener">Find/Create access keys</a></div>
  </div>

  <div class="pv-field-group">
    <label for="module_cfg_s3_secret_key">Secret access key</label>
    <input id="module_cfg_s3_secret_key" name="module_cfg_s3_secret_key" type="password" autocomplete="off" {% if cfg_readonly %}disabled{% endif %} />
    {% if edit_module and edit_cfg and edit_cfg.get('secret_key') %}
      {% set _pv_sk = (edit_cfg.get('secret_key') or '')|string %}
      <div class="pv-help">Saved: {{ ('*' * (_pv_sk|length - 4)) ~ _pv_sk[-4:] if _pv_sk and (_pv_sk|length > 4) else ('*' * (_pv_sk|length)) }}</div>
    {% endif %}
    <div class="pv-help">Credentials are never echoed back after save. Store this key securely.</div>
  </div>
</div>
